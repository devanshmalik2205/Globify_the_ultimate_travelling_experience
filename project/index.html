<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Globify - Your Travel Partner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header class="header">
        <div class="container">
            <div class="top-nav">
                <a href="index.html" class="logo">
                    <img src="Icon.svg" alt="G">
                    <span>Globify</span>
                </a>
                <nav class="top-nav-links">
                    <a href="#">List Your Property</a>

                    
                    <div id="auth-links" style="display: flex; gap: 1rem; align-items: center;">
                        <a href="#signInModal">Sign In</a>
                        <a href="#registerModal" class="btn btn-primary">Register</a>
                    </div>

                    
                    <div id="user-profile" class="user-profile">
                        <div id="user-icon" class="user-profile-icon"></div>
                        <span id="user-name" class="user-profile-name"></span>
                    </div>

                    <a href="About_Us.html" class="btn btn-secondary">About Us</a>
                </nav>
            </div>
            <nav class="main-nav" id="main-nav-bar">
                <a href="#" class="nav-item active" data-tab="flights-form">
                    <span>‚úàÔ∏è</span><span>Flights</span>
                </a>
                <a href="#" class="nav-item" data-tab="hotels-form">
                    <span>üè®</span><span>Hotels & Stays</span>
                </a>
                <a href="#" class="nav-item" data-tab="holiday-packages-form">
                    <span>üèùÔ∏è</span><span>Holiday Packages</span>
                </a>
                <a href="#" class="nav-item" data-tab="cabs-form">
                    <span>üöï</span><span>Cabs</span>
                </a>
                <a href="#" class="nav-item" data-tab="buses-form">
                    <span>üöå</span><span>Buses</span>
                </a>
                <a href="#" class="nav-item" data-tab="trains-form">
                    <span>üöÇ</span><span>Trains</span>
                </a>
                <a href="#" class="nav-item" data-tab="attractions-form">
                    <span>üèõÔ∏è</span><span>Attractions</span>
                </a>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero-section">
            <div class="container">
                <div id="booking-widget">
                    <div class="booking-form-panel active" id="flights-form">
                        <div class="booking-form-grid">
                            <div class="form-field form-field-wrapper">
                                <label for="from-input">From</label>
                                <input type="text" id="from-input" class="main-text-input" value="Delhi"
                                    placeholder="Enter city or airport" autocomplete="off">
                                <input type="text" id="from-subtext" class="sub-text-input"
                                    value="DEL, Delhi Airport India" placeholder="Airport code" readonly>
                                <div id="from-suggestions" class="suggestions-list"></div>
                            </div>

                            <button class="swap-button" id="swap-btn" type="button">
                                <svg style="width:1.25rem; height:1.25rem; color:#4b5563;" fill="none"
                                    stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                                </svg>
                            </button>

                            <div class="form-field form-field-wrapper">
                                <label for="to-input">To</label>
                                <input type="text" id="to-input" class="main-text-input" value="Bengaluru"
                                    placeholder="Enter city or airport" autocomplete="off">
                                <input type="text" id="to-subtext" class="sub-text-input" value="BLR, Bengaluru Intl"
                                    placeholder="Airport code" readonly>
                                <div id="to-suggestions" class="suggestions-list"></div>
                            </div>

                            <div class="form-field">
                                <label for="departure-date">Departure</label>
                                <input type="date" id="departure-date" class="main-text-input date-input"
                                    value="2025-09-15">
                                <p id="departure-day" class="sub-text">Monday</p>
                            </div>

                            <div class="form-field">
                                <label for="return-date">Return</label>
                                <input type="date" id="return-date" class="main-text-input date-input">
                                <p id="return-day" class="sub-text">&nbsp;</p>
                            </div>

                            <div class="form-field">
                                <label for="travellers-input">Travellers & Class</label>
                                <input type="number" id="travellers-input" class="main-text-input" value="1" min="1"
                                    step="1">
                                <select id="class-select" class="sub-text-input select-input">
                                    <option value="Economy" selected>Economy</option>
                                    <option value="Premium Economy">Premium Economy</option>
                                    <option value="Business">Business</option>
                                    <option value="First">First</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="booking-form-panel" id="hotels-form">
                        <div class="booking-form-placeholder">
                            üè® Hotel & Stays booking form coming soon!
                        </div>
                    </div>

                    <div class="booking-form-panel" id="holiday-packages-form">
                        <div class="booking-form-placeholder">
                            üèùÔ∏è Holiday Packages booking form coming soon!
                        </div>
                    </div>

                    <div class="booking-form-panel" id="cabs-form">
                        <div class="booking-form-placeholder">
                            üöï Cabs booking form coming soon!
                        </div>
                    </div>

                    <div class="booking-form-panel" id="buses-form">
                        <div class="booking-form-placeholder">
                            üöå Buses booking form coming soon!
                        </div>
                    </div>

                    <div class="booking-form-panel" id="trains-form">
                        <div class="booking-form-placeholder">
                            üöÇ Trains booking form coming soon!
                        </div>
                    </div>

                    <div class="booking-form-panel" id="attractions-form">
                        <div class="booking-form-placeholder">
                            üèõÔ∏è Attractions booking form coming soon!
                        </div>
                    </div>

                    <div class="search-btn-container">
                        <div id="search-error" class="search-error-message"></div>
                        <button class="search-btn" type="button" id="search-btn">SEARCH</button>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <h2 class="section-title">Explore 1000+ Famous Locations with us!</h2>
                <p class="section-subtitle">Discover the most in-demand locations at the lowest prices available and get
                    the best customer experience.</p>
                <div class="slider-wrapper">
                    <div id="locationsContainer" class="slider-container">
                    </div>
                    <button id="locationsScrollLeft" class="scroll-btn left">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                            </path>
                        </svg>
                    </button>
                    <button id="locationsScrollRight" class="scroll-btn right">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7">
                            </path>
                        </svg>
                    </button>
                </div>
                <div class="view-all-link-container">
                    <a href="all_locations.html" class="view-all-link">
                        Show Full Catalog <span>‚Üí</span>
                    </a>
                </div>
            </div>
        </section>
        
        <section class="section" style="background-color:#f9fafb;">
            <div class="container">
                <h2 class="section-title">Featured Homes Recommended for you</h2>
                <div class="slider-wrapper">
                    <div id="homesContainer" class="slider-container">
                    </div>
                    <button id="homesScrollLeft" class="scroll-btn left">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                            </path>
                        </svg>
                    </button>
                    <button id="homesScrollRight" class="scroll-btn right">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7">
                            </path>
                        </svg>
                    </button>
                </div>
                <div class="view-all-link-container">
                    <a href="all_homes.html" class="view-all-link">
                        Show Full Catalog <span>‚Üí</span>
                    </a>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="download-banner">
                    <div>
                        <h2 class="section-title" style="color:white; font-size: 2.25rem; margin-bottom: 0.75rem;">
                            Download our App</h2>
                        <p class="section-subtitle" style="color:white; opacity:0.9; max-width: 36rem;">Get BEST DEALS
                            on vocational and business accommodation at your convenient on your phone with us.</p>
                    </div>
                    <div class="qr-code">
                        <img src="Hatt_qrcode 2.png" alt="QR Code">
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container" style="text-align: center;">
                <h2 class="section-title">What does Customers Say About us</h2>
                <p class="section-subtitle" style="margin: 0.5rem auto;">We are rated 4.8/5 in Travelling and Business
                    Accommodation.</p>
                <div id="testimonialsGrid" class="testimonials-grid">
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <a href="#" class="logo" style="color:white; font-size:1.5rem;">
                        <img src="Icon.svg" alt="G">
                        <span>Globify</span>
                    </a>
                </div>
                <div>
                    <h4>Explore</h4>
                    <ul class="footer-links">
                        <li><a href="#">Flights</a></li>
                        <li><a href="#">Hotels</a></li>
                        <li><a href="#">Cabs</a></li>
                        <li><a href="#">Car Rental</a></li>
                    </ul>
                </div>
                <div>
                    <h4>Company</h4>
                    <ul class="footer-links">
                        <li><a href="About_Us.html">About Us</a></li>
                        <li><a href="#">How it works</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4>Subscribe</h4>
                    <p style="font-size:0.875rem;">Join our newsletter to stay updated.</p>
                    <div class="subscribe-form"><input type="email" placeholder="Your email"><button>‚Üí</button></div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Copyright @ 2025 Globify. All rights reserved.</p>
                <div class="socials"><span>f</span><span>in</span><span>t</span><span>m</span></div>
            </div>
        </div>
    </footer>

    <div id="signInModal" class="modal-overlay">
        <div class="modal-content">
            <a href="#" class="modal-close-btn">&times;</a>
            <div class="auth-card">
                <h2>Sign In</h2>
                <form id="signInForm">
                    <input type="email" placeholder="Your email" required>
                    <input type="password" placeholder="Password" required>
                    <button type="submit" class="btn btn-primary auth-btn">Enter</button>
                </form>
                <p class="auth-switch">New here? <a href="#registerModal">Create an account</a></p>
            </div>
        </div>
    </div>

    <div id="registerModal" class="modal-overlay">
        <div class="modal-content">
            <a href="#" class="modal-close-btn">&times;</a>
            <div class="auth-card">
                <h2>Register</h2>
                <form id="registerForm">
                    <input id="register-name" type="text" placeholder="Name" required>
                    <input type="email" placeholder="Your email" required>
                    <input type="date" placeholder="Date of Birth" required>
                    <input type="password" placeholder="Create Password" required>
                    <input type="password" placeholder="Confirm Password" required>
                    <button type="submit" class="btn btn-primary auth-btn">Enter</button>
                </form>
                <p class="auth-switch">Already have an account? <a href="#signInModal">Sign in</a></p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {

            let allAirports = [];
            const fromInput = document.getElementById('from-input');
            const fromSubtext = document.getElementById('from-subtext');
            const fromSuggestions = document.getElementById('from-suggestions');
            const toInput = document.getElementById('to-input');
            const toSubtext = document.getElementById('to-subtext');
            const toSuggestions = document.getElementById('to-suggestions');

            fetch('/api/airports')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    allAirports = data;
                })
                .catch(error => console.error('Error fetching airports:', error));

            const renderSuggestions = (inputEl, listEl, subtextEl) => {
                const filterText = inputEl.value.toLowerCase();
                listEl.innerHTML = '';

                if (filterText.length < 1) {
                    listEl.style.display = 'none';
                    return;
                }

                const filteredAirports = allAirports.filter(airport => 
                    airport.city.toLowerCase().includes(filterText) ||
                    airport.code.toLowerCase().includes(filterText) ||
                    airport.name.toLowerCase().includes(filterText)
                ).slice(0, 5);

                if (filteredAirports.length === 0) {
                    listEl.style.display = 'none';
                    return;
                }

                filteredAirports.forEach(airport => {
                    const item = document.createElement('div');
                    item.classList.add('suggestion-item');
                    item.innerHTML = `
                        <strong>${airport.city} (${airport.code})</strong>
                        <div class="suggestion-item-details">${airport.name}</div>
                    `;
                    item.addEventListener('click', () => {
                        inputEl.value = airport.city;
                        subtextEl.value = `${airport.code}, ${airport.name}`;
                        listEl.style.display = 'none';
                    });
                    listEl.appendChild(item);
                });

                listEl.style.display = 'block';
            };

            if(fromInput && fromSuggestions && fromSubtext) {
                fromInput.addEventListener('input', () => renderSuggestions(fromInput, fromSuggestions, fromSubtext));
            }
            if(toInput && toSuggestions && toSubtext) {
                toInput.addEventListener('input', () => renderSuggestions(toInput, toSuggestions, toSubtext));
            }

            document.addEventListener('click', (e) => {
                if (fromSuggestions && !fromInput.contains(e.target) && !fromSuggestions.contains(e.target)) {
                    fromSuggestions.style.display = 'none';
                }
                if (toSuggestions && !toInput.contains(e.target) && !toSuggestions.contains(e.target)) {
                    toSuggestions.style.display = 'none';
                }
            });


            class Slider {
                constructor(containerId, scrollLeftId, scrollRightId, cardSelector) {
                    this.container = document.getElementById(containerId);
                    this.scrollLeftBtn = document.getElementById(scrollLeftId);
                    this.scrollRightBtn = document.getElementById(scrollRightId);
                    this.cardSelector = cardSelector;

                    if (this.container && this.scrollLeftBtn && this.scrollRightBtn) {
                        this.init();
                    }
                }

                init() {
                    this.scrollRightBtn.addEventListener('click', () => this.scroll('right'));
                    this.scrollLeftBtn.addEventListener('click', () => this.scroll('left'));
                }

                scroll(direction) {
                    const card = this.container.querySelector(this.cardSelector); 
                    if (card) {
                        const scrollAmount = card.offsetWidth + 24;
                        const scrollValue = direction === 'right' ? scrollAmount : -scrollAmount;
                        this.container.scrollBy({ left: scrollValue, behavior: 'smooth' });
                    }
                }
            }


            const renderLocations = (locations) => {
                const container = document.getElementById('locationsContainer');
                if (!container) return;

                let locationsHTML = locations.slice(0, 6).map(location => `
                    <a href="${location.link}">
                        <div class="location-card">
                            <div class="card-img-container"><img src="${location.image}" alt="${location.title}" class="card-img" onerror="this.src='https://placehold.co/240x288/E0E0E0/757575?text=Location';"></div>
                            <h3 class="card-title">${location.title}</h3>
                        </div>
                    </a>
                `).join('');

                locationsHTML += `
                    <a href="all_locations.html" class="view-more-card-link"> 
                        <div class="view-more-card location-card-size">
                            <span aria-hidden="true">‚Üí</span>
                            <p>View More</p>
                        </div>
                    </a>
                `;
                
                container.innerHTML = locationsHTML;
                new Slider('locationsContainer', 'locationsScrollLeft', 'locationsScrollRight', '.location-card, .view-more-card-link');
            };

            const renderHomes = (homes) => {
                const container = document.getElementById('homesContainer');
                if (!container) return;

                let homesHTML = homes.slice(0, 6).map(home => `
                    <a href="${home.link}" class="link_rooms">
                        <div class="hotel-card">
                            <div class="card-img-container">
                                <img src="${home.image}" alt="${home.title}" class="card-img" onerror="this.src='https://placehold.co/320x192/E0E0E0/757575?text=Home';">
                                <span class="rating-badge">${home.rating}</span>
                            </div>
                            <div class="card-content">
                                <h3 class="card-title-main">${home.title}</h3>
                                <p class="card-subtitle">${home.subtitle}</p>
                                <p class="price">${home.price} <span class="price-subtext">/ night</span></p>
                                <button class="details-btn">View Details</button>
                            </div>
                        </div>
                    </a>
                `).join('');

                homesHTML += `
                    <a href="all_homes.html" class="view-more-card-link">
                        <div class="view-more-card hotel-card-size">
                            <span aria-hidden="true">‚Üí</span>
                            <p>View More</p>
                        </div>
                    </a>
                `;

                container.innerHTML = homesHTML;
                new Slider('homesContainer', 'homesScrollLeft', 'homesScrollRight', '.link_rooms, .view-more-card-link');
            };

            const renderTestimonials = (testimonials) => {
                const grid = document.getElementById('testimonialsGrid');
                if (!grid) return;
                grid.innerHTML = testimonials.map(testimonial => `
                    <div class="testimonial-card">
                        <div class="testimonial-quote-icon">‚Äú</div>
                        <div class="testimonial-header">
                            <h3>${testimonial.name}</h3>
                            <div class="testimonial-stars">${"‚≠ê".repeat(testimonial.rating)}</div>
                        </div>
                        <p>"${testimonial.quote}"</p>
                    </div>
                `).join('');
            };


            fetch('/api/locations')
                .then(response => response.json())
                .then(renderLocations)
                .catch(error => {
                    console.error('Error fetching locations:', error);
                    document.getElementById('locationsContainer').innerHTML = "<p>Could not load locations.</p>";
                });

            fetch('/api/homes')
                .then(response => response.json())
                .then(renderHomes)
                .catch(error => {
                    console.error('Error fetching homes:', error);
                    document.getElementById('homesContainer').innerHTML = "<p>Could not load homes.</p>";
                });

            fetch('/api/testimonials')
                .then(response => response.json())
                .then(renderTestimonials)
                .catch(error => {
                    console.error('Error fetching testimonials:', error);
                    document.getElementById('testimonialsGrid').innerHTML = "<p>Could not load testimonials.</p>";
                });


            const signInForm = document.getElementById('signInForm');
            const registerForm = document.getElementById('registerForm');

            const authLinks = document.getElementById('auth-links');
            const userProfile = document.getElementById('user-profile');
            const userNameEl = document.getElementById('user-name');
            const userIconEl = document.getElementById('user-icon');
            const registerNameInput = document.getElementById('register-name');

            const handleLogin = (name) => {
                userNameEl.textContent = name;
                userIconEl.textContent = name.charAt(0).toUpperCase();

                authLinks.style.display = 'none';
                userProfile.style.display = 'flex';

                window.location.hash = '#';
            };

            if (signInForm) {
                signInForm.addEventListener('submit', function (event) {
                    event.preventDefault();
                    handleLogin('User');
                });
            }

            if (registerForm) {
                registerForm.addEventListener('submit', function (event) {
                    event.preventDefault();
                    const userName = registerNameInput.value.trim() || 'User';
                    handleLogin(userName);
                });
            }

            const swapBtn = document.getElementById('swap-btn');

            if (swapBtn) {
                swapBtn.addEventListener('click', () => {
                    const tempMain = fromInput.value;
                    fromInput.value = toInput.value;
                    toInput.value = tempMain;

                    const tempSub = fromSubtext.value;
                    fromSubtext.value = toSubtext.value;
                    toSubtext.value = tempSub;
                });
            }

            const departureDate = document.getElementById('departure-date');
            const departureDay = document.getElementById('departure-day');
            const returnDate = document.getElementById('return-date');
            const returnDay = document.getElementById('return-day');

            const getDayOfWeek = (dateString) => {
                if (!dateString) return "&nbsp;";
                const date = new Date(dateString + 'T00:00:00');
                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                return days[date.getUTCDay()];
            };

            const updateDay = (dateInput, dayElement) => {
                const day = getDayOfWeek(dateInput.value);
                dayElement.innerHTML = day;
            };

            if (departureDate && departureDay) {
                updateDay(departureDate, departureDay);
                departureDate.addEventListener('change', () => updateDay(departureDate, departureDay));
            }

            if (returnDate && returnDay) {
                updateDay(returnDate, returnDay);
                returnDate.addEventListener('change', () => updateDay(returnDate, returnDay));
            }

            const mainNavBar = document.getElementById('main-nav-bar');
            const navItems = mainNavBar.querySelectorAll('.nav-item');
            const bookingPanels = document.querySelectorAll('#booking-widget .booking-form-panel');

            if (mainNavBar && navItems.length > 0 && bookingPanels.length > 0) {
                mainNavBar.addEventListener('click', (e) => {
                    const clickedNavItem = e.target.closest('.nav-item');
                    if (!clickedNavItem) return;

                    e.preventDefault();

                    const tabId = clickedNavItem.dataset.tab;
                    if (!tabId) return;

                    navItems.forEach(item => {
                        item.classList.remove('active');
                    });
                    clickedNavItem.classList.add('active');

                    bookingPanels.forEach(panel => {
                        if (panel.id === tabId) {
                            panel.classList.add('active');
                        } else {
                            panel.classList.remove('active');
                        }
                    });
                });
            }


            const searchButton = document.getElementById('search-btn');
            if (searchButton) {
                searchButton.addEventListener('click', function() {
                    const errorEl = document.getElementById('search-error');
                    errorEl.textContent = '';
                    errorEl.style.display = 'none';

                    const activeNav = document.querySelector('.nav-item.active');
                    if (!activeNav) return;

                    const activeTabId = activeNav.dataset.tab;

                    if (activeTabId === 'flights-form') {
                        const from = document.getElementById('from-input').value.trim();
                        const to = document.getElementById('to-input').value.trim();
                        const departureInput = document.getElementById('departure-date');
                        const departure = departureInput.value;
                        const travellers = document.getElementById('travellers-input').value;
                        const travelClass = document.getElementById('class-select').value;
                        
                        if (!from || !to) {
                            errorEl.textContent = 'Please enter both "From" and "To" locations.';
                            errorEl.style.display = 'block';
                            return;
                        }
                        
                        if (from.toLowerCase() === to.toLowerCase()) {
                            errorEl.textContent = '"From" and "To" locations cannot be the same.';
                            errorEl.style.display = 'block';
                            return;
                        }

                        if (!departure) {
                            errorEl.textContent = 'Please select a departure date.';
                            errorEl.style.display = 'block';
                            return;
                        }
                        
                        const today = new Date();
                        const selectedDate = new Date(departure + 'T00:00:00');
                        today.setHours(0, 0, 0, 0);

                        if (selectedDate < today) {
                            errorEl.textContent = 'Departure date cannot be in the past.';
                            errorEl.style.display = 'block';
                            return;
                        }
                        
                        if (travellers < 1) {
                            errorEl.textContent = 'You must have at least 1 traveller.';
                            errorEl.style.display = 'block';
                            return;
                        }
                        
                        
                        const queryParams = new URLSearchParams({
                            from: from,
                            to: to,
                            departure: departure,
                            travellers: travellers,
                            class: travelClass
                        });
                        
                        window.location.href = `flight_results.html?${queryParams.toString()}`;
                    } else {
                        console.log(`Search clicked for ${activeTabId}. Not implemented yet.`);
                        alert(activeTabId + " search is not implemented yet.");
                    }
                });
            }

        });
    </script>
</body>

</html>